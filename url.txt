package com.example.gateway;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

@SpringBootApplication
public class GatewayServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(GatewayServiceApplication.class, args);
    }
}

@RestController
@RequestMapping("/gateway")
class GatewayController {

    private final RestTemplate restTemplate = new RestTemplate();

    @GetMapping("/connect-data")
    public String connectToDataService() {
        String response = restTemplate.getForObject("http://localhost:8082/data/health", String.class);
        return "Connected to DataService: " + response;
    }

    @GetMapping("/connect-storage")
    public String connectToStorageService() {
        String response = restTemplate.getForObject("http://localhost:8083/storage/health", String.class);
        return "Connected to StorageService: " + response;
    }

    @GetMapping("/health")
    public String healthCheck() {
        return "GatewayService is up!";
    }
}



===========================================================================


package com.example.data;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

@SpringBootApplication
public class DataServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(DataServiceApplication.class, args);
    }
}

@RestController
@RequestMapping("/data")
class DataController {

    private final RestTemplate restTemplate = new RestTemplate();

    @GetMapping("/connect-storage")
    public String connectToStorageService() {
        String response = restTemplate.getForObject("http://localhost:8083/storage/health", String.class);
        return "Connected to StorageService: " + response;
    }

    @GetMapping("/health")
    public String healthCheck() {
        return "DataService is up!";
    }
}



================================================================================


package com.example.storage;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@SpringBootApplication
public class StorageServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(StorageServiceApplication.class, args);
    }
}

@RestController
@RequestMapping("/storage")
class StorageController {

    @GetMapping("/health")
    public String healthCheck() {
        return "StorageService is up!";
    }
}



